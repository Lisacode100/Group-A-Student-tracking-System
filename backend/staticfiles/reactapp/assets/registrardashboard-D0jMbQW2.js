import{r as s,u as I,R as t,O as S}from"./index-c4qKUfTE.js";/* empty css                         */import{N as v}from"./Navbar-BjOvBhJ2.js";import{S as E}from"./Sidebar-DR6lSwmc.js";import{y as r}from"./index-JgFo4-g7.js";import{i as l,l as y}from"./api-BQS_Y7Kh.js";import"./logo-CZhsUzzd.js";import"./search-DhYgOuvo.js";import"./mail-BI_ncAYh.js";import"./person-Bhepz9K9.js";const F=()=>{const[n,i]=s.useState([]),[u,m]=s.useState([]),[g,o]=s.useState(!0),d=I();s.useEffect(()=>{localStorage.setItem("userRole","registrar")},[]);const c=async()=>{try{o(!0);const[e,a]=await Promise.all([l.getIssues(),y.getLecturers()]);i(e),m(a)}catch(e){e==="Unauthorized"?p():r.error(e||"Failed to fetch data")}finally{o(!1)}},f=async(e,a)=>{try{await l.assignIssue(e,a),await c(),r.success("Issue assigned successfully")}catch(h){r.error(h||"Failed to assign issue")}},p=()=>{localStorage.removeItem("authToken"),localStorage.removeItem("userRole"),localStorage.removeItem("refreshToken"),d("/signin")};return s.useEffect(()=>{c()},[]),t.createElement("div",{className:"dashboard-container"},t.createElement(v,null),t.createElement(E,null),t.createElement("div",{className:"dashboard-content"},t.createElement(S,{context:{allIssues:n,lecturers:u,loading:g,onAssignIssue:f}})))};export{F as default};
