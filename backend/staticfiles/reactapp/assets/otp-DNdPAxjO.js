import{r as n,u as P,R as e}from"./index-sDdCnybi.js";import{C,h as T}from"./congratulations-Dm82AM4W.js";import{a as d}from"./api-D3_w-X5d.js";const b="/static/assets/shield-yShal2eh.png",S="/static/assets/refresh-CDKOpQuO.png",I=({email:c,onResendOtp:w})=>{const[o,i]=n.useState(["","","","","",""]),[u,r]=n.useState(""),[h,l]=n.useState(!1),[f,g]=n.useState(!1),m=n.useRef([]),E=P(),v=(t,s)=>{const a=t.target.value;if(/^\d$/.test(a)||a===""){const p=[...o];p[s]=a,i(p),a!==""&&s<5&&m.current[s+1].focus()}},y=async()=>{const t=o.join("");if(!t){r("Please enter the OTP.");return}try{const s=await d.verifyOTP(c,t);l(!0),r(""),console.log("OTP verified successfully:",s),g(!0),console.log("showCongratulations:",!0),E("/congratulations")}catch(s){console.error("OTP verification failed:",s),r(data.error||"Invalid OTP. Please try again."),l(!1)}},N=async()=>{i(["","","","","",""]),r(""),l(!1);try{const t=await d.resendOTP(c);console.log("OTP resent successfully:",t)}catch(t){console.error("Failed to resend OTP:",t),r(t.message||"Failed to resend OTP.")}},O=o.every(t=>t!=="");return f?e.createElement(C,null):e.createElement("div",{className:"otp-container"},e.createElement("div",{className:"aits-logo"},"AITS"),e.createElement("div",{className:"help"},e.createElement("img",{src:T,alt:"help logo",className:"help-logo"}),"Help?",e.createElement("div",{className:"tooltip"},"Email Address: alvin69david@gmail.com Phone Number: 0758862363")),e.createElement("div",{className:"otp-content"},e.createElement("img",{className:"shield",src:b,alt:"shiled logo"}),e.createElement("h2",{className:"authenticate-title"},"Authenticate Your Account"),e.createElement("p",{className:"authenticate-sub-title"},"Protecting your account is our top priority. Please confirm your account by entering the authorization code we sent to ",e.createElement("strong",null,c),"."),e.createElement("div",{className:"otp-inputs"},o.map((t,s)=>e.createElement("input",{key:s,className:"otp-input",type:"text",maxLength:"1",value:t,onChange:a=>v(a,s),ref:a=>m.current[s]=a}))),e.createElement("button",{className:"verify-button",onClick:y,disabled:!O},"Verify"),e.createElement("button",{className:"resend-button",onClick:N},e.createElement("img",{className:"refresh-icon",src:S,alt:"refresh icon"}),"Resend Code"),u&&e.createElement("p",{className:"error-message"},u),h&&e.createElement("p",{className:"success-message"},"OTP verified successfully!")))};export{I as default};
