import{u as g,r as c,R as e}from"./index-sDdCnybi.js";import{l as p}from"./logo-CZhsUzzd.js";import{m as E}from"./mail-BI_ncAYh.js";import{p as h}from"./padlock-B0UKb9uO.js";import{a as f}from"./api-D3_w-X5d.js";const I=()=>{const r=g(),[a,m]=c.useState({email:"",password:""}),[n,s]=c.useState(""),o=l=>{const{name:t,value:u}=l.target;m({...a,[t]:u})},i=async l=>{if(l.preventDefault(),!a.email||!a.password){s("Please fill in all fields.");return}if(a.password.length<8){s("Password must be at least 8 characters long.");return}try{const t=await f.login(a.email,a.password);switch(localStorage.setItem("authToken",t.access),localStorage.setItem("refreshToken",t.refresh),localStorage.setItem("userRole",t.role),localStorage.setItem("userEmail",t.email),localStorage.setItem("userFullname",t.fullname),t.role){case"lecturer":r("/lecturer/dashboard");break;case"student":r("/student/dashboard");break;case"registrar":r("/registrar/dashboard");break;default:s("Unknown user role.");break}}catch(t){console.error("Sign-in failed:",t),s("Unable to connect to the server. Please try again later.")}},d=a.email&&a.password.length>=8;return e.createElement("div",{className:"signin-container"},e.createElement("div",{className:"signin-left"},e.createElement("img",{src:p,alt:"logo",className:"muk"}),e.createElement("h1",{className:"system-title"},"Welcome to the",e.createElement("br",null)," Academic Issue Tracking System",e.createElement("br",null),"AITS")),e.createElement("div",{className:"signin-right"},e.createElement("form",{className:"signin-right-form",onSubmit:i},e.createElement("h2",{className:"title"},"Sign In Into Your Account"),e.createElement("p",{className:"sub-title"},"Please fill in all the fields below"),n&&e.createElement("p",{className:"error-message"},n),e.createElement("label",null,"Email Address",e.createElement("div",{className:"input-container"},e.createElement("input",{className:"emailaddress",type:"email",name:"email",placeholder:"Enter Your Email Address",value:a.email,onChange:o,required:!0}),e.createElement("img",{src:E,alt:"mail logo",className:"input-icon"}))),e.createElement("label",null,"Password",e.createElement("div",{className:"input-container"},e.createElement("input",{className:"pass-word",type:"password",name:"password",placeholder:"Enter Your Password",value:a.password,onChange:o,minLength:8,required:!0}),e.createElement("img",{src:h,alt:"padlock",className:"padlock-icon"}))),e.createElement("p",{className:"forgot-password"},e.createElement("a",{href:"forgot-password",className:"forgot-password-link"},"Forgot Password?")),e.createElement("button",{className:"signinbutton",type:"submit",disabled:!d},"SIGN IN"),e.createElement("p",{className:"link"},"Don't have an account? ",e.createElement("a",{href:"signup",className:"signup-link"},"Sign Up")))))};export{I as default};
